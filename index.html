<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منيو ريدان الفخم</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* جميع أنماط CSS السابقة تبقى كما هي */
        /* ... */
    </style>
</head>
<body>
    <!-- جميع عناصر HTML تبقى كما هي -->
    <!-- ... -->

    <script>
        // اللغة والتبديل
        const languageToggle = document.getElementById('languageToggle');
        languageToggle.addEventListener('click', () => {
            document.body.classList.toggle('english');
        });

        // نوع الطلب
        const orderBtns = document.querySelectorAll('.order-btn');
        const orderForms = document.querySelectorAll('.order-form');
        
        orderBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                orderBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const type = btn.getAttribute('data-type');
                orderForms.forEach(form => form.classList.remove('active'));
                document.getElementById(`${type}-form`).classList.add('active');
            });
        });

        // فئات القائمة
        const categoryBtns = document.querySelectorAll('.category-btn');
        const menuItems = document.querySelectorAll('.menu-item');
        
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const category = btn.getAttribute('data-category');
                menuItems.forEach(item => {
                    if (category === 'all' || item.getAttribute('data-category') === category) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });

        // السلة والكميات
        const cartIcon = document.getElementById('cartIcon');
        const cartSidebar = document.getElementById('cartSidebar');
        const closeCart = document.getElementById('closeCart');
        const cartItemsContainer = document.getElementById('cartItems');
        const cartCount = document.getElementById('cartCount');
        const cartTotal = document.getElementById('cartTotal');
        const notification = document.getElementById('notification');
        const notificationSound = document.getElementById('notificationSound');
        
        let cart = [];

        // فتح/إغلاق السلة
        cartIcon.addEventListener('click', () => {
            cartSidebar.classList.add('open');
        });
        
        closeCart.addEventListener('click', () => {
            cartSidebar.classList.remove('open');
        });

        // التحكم في الكمية
        document.querySelectorAll('.quantity-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const itemContainer = this.closest('.menu-item');
                const quantityElement = itemContainer.querySelector('.quantity');
                let quantity = parseInt(quantityElement.textContent);
                
                if (this.classList.contains('minus')) {
                    quantity = Math.max(0, quantity - 1);
                } else {
                    quantity += 1;
                }
                
                quantityElement.textContent = quantity;
            });
        });

        // إضافة إلى السلة
        document.querySelectorAll('.add-to-cart').forEach(btn => {
            btn.addEventListener('click', function() {
                const itemContainer = this.closest('.menu-item');
                const quantity = parseInt(itemContainer.querySelector('.quantity').textContent);
                
                if (quantity > 0) {
                    const itemName = itemContainer.querySelector('.item-name span.ar').textContent;
                    const itemNameEn = itemContainer.querySelector('.item-name-en').textContent;
                    const itemPrice = parseFloat(itemContainer.querySelector('.item-price').textContent.split(' ')[0]);
                    const itemImage = itemContainer.querySelector('.item-image img').src;
                    
                    // التحقق إذا كان العنصر موجوداً في السلة
                    const existingItem = cart.find(item => item.name === itemName);
                    
                    if (existingItem) {
                        existingItem.quantity += quantity;
                    } else {
                        cart.push({
                            name: itemName,
                            nameEn: itemNameEn,
                            price: itemPrice,
                            quantity: quantity,
                            image: itemImage
                        });
                    }
                    
                    updateCart();
                    showNotification();
                    itemContainer.querySelector('.quantity').textContent = '0';
                }
            });
        });

        // تحديث السلة
        function updateCart() {
            // تحديث عدد العناصر
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // تحديث عناصر السلة
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="ar" style="text-align: center; padding: 20px; color: #666;">السلة فارغة</div>
                    <div class="en" style="text-align: center; padding: 20px; color: #666;">Your cart is empty</div>
                `;
                cartTotal.textContent = '0 AED';
                return;
            }
            
            cartItemsContainer.innerHTML = '';
            let total = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'cart-item';
                cartItemElement.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-name ar">${item.name}</div>
                        <div class="cart-item-name en">${item.nameEn}</div>
                        <div class="cart-item-price">${item.price} AED x ${item.quantity} = ${itemTotal} AED</div>
                    </div>
                    <div class="cart-item-actions">
                        <button class="remove-item" data-index="${index}">&times;</button>
                    </div>
                `;
                
                cartItemsContainer.appendChild(cartItemElement);
            });
            
            // إضافة مستمعي الأحداث لأزرار الإزالة
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    cart.splice(index, 1);
                    updateCart();
                });
            });
            
            cartTotal.textContent = `${total} AED`;
        }

        // عرض الإشعار
        function showNotification() {
            notification.classList.add('show');
            notificationSound.play();
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // الدفع
        document.querySelectorAll('.checkout-btn').forEach(btn => {
            btn.addEventListener('click', checkout);
        });
        
        function checkout() {
            if (cart.length === 0) {
                alert(document.body.classList.contains('english') ? 'Your cart is empty!' : 'السلة فارغة!');
                return;
            }
            
            const activeForm = document.querySelector('.order-form.active');
            const orderType = document.querySelector('.order-btn.active').getAttribute('data-type');
            
            let orderDetails = {
                type: orderType,
                items: [...cart],
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                timestamp: new Date().toLocaleString()
            };
            
            if (orderType === 'dine-in') {
                const tableNumber = document.getElementById('table-number').value;
                if (!tableNumber) {
                    alert(document.body.classList.contains('english') ? 'Please select a table number!' : 'الرجاء اختيار رقم الطاولة!');
                    return;
                }
                orderDetails.tableNumber = tableNumber;
            } else if (orderType === 'pickup') {
                const name = document.getElementById('pickup-name').value;
                const phone = document.getElementById('pickup-phone').value;
                
                if (!name || !phone) {
                    alert(document.body.classList.contains('english') ? 'Please enter your name and phone number!' : 'الرجاء إدخال الاسم ورقم الهاتف!');
                    return;
                }
                
                orderDetails.customerName = name;
                orderDetails.customerPhone = phone;
            } else if (orderType === 'reservation') {
                const name = document.getElementById('reservation-name').value;
                const phone = document.getElementById('reservation-phone').value;
                const time = document.getElementById('reservation-time').value;
                const people = document.getElementById('reservation-people').value;
                
                if (!name || !phone || !time || !people) {
                    alert(document.body.classList.contains('english') ? 'Please fill all reservation details!' : 'الرجاء ملء جميع تفاصيل الحجز!');
                    return;
                }
                
                orderDetails.customerName = name;
                orderDetails.customerPhone = phone;
                orderDetails.reservationTime = time;
                orderDetails.people = people;
            }
            
            // في التطبيق الحقيقي، هنا يتم إرسال البيانات للخادم
            console.log('Order Submitted:', orderDetails);
            
            // لأغراض العرض، نضيفها إلى لوحة المسؤول
            addOrderToAdminPanel(orderDetails);
            
            // تفريغ السلة
            cart = [];
            updateCart();
            
            // عرض رسالة نجاح
            alert(document.body.classList.contains('english') ? 
                 'Your order has been submitted successfully!' : 
                 'تم تقديم طلبك بنجاح!');
        }

        // لوحة المسؤول
        const adminToggle = document.getElementById('adminToggle');
        const adminPanel = document.getElementById('adminPanel');
        
        adminToggle.addEventListener('click', () => {
            adminPanel.classList.toggle('active');
        });

        // إضافة طلب إلى لوحة المسؤول
        function addOrderToAdminPanel(order) {
            const ordersList = document.getElementById('ordersList');
            
            // إزالة رسالة "لا توجد طلبات" إذا كانت موجودة
            const noOrdersMsg = ordersList.querySelector('div[style*="text-align: center"]');
            if (noOrdersMsg) noOrdersMsg.remove();
            
            const orderElement = document.createElement('div');
            orderElement.className = 'order-card';
            
            let orderTypeText = '';
            if (order.type === 'dine-in') {
                orderTypeText = document.body.classList.contains('english') ? 
                    `Dine In - Table ${order.tableNumber}` : 
                    `طلب محلي - طاولة ${order.tableNumber}`;
            } else if (order.type === 'pickup') {
                orderTypeText = document.body.classList.contains('english') ? 
                    `Pickup - ${order.customerName}` : 
                    `استلام - ${order.customerName}`;
            } else if (order.type === 'reservation') {
                const reservationTime = new Date(order.reservationTime).toLocaleString();
                orderTypeText = document.body.classList.contains('english') ? 
                    `Reservation - ${order.customerName} (${reservationTime})` : 
                    `حجز - ${order.customerName} (${reservationTime})`;
            }
            
            let itemsHtml = '';
            order.items.forEach(item => {
                itemsHtml += `
                    <div class="order-item">
                        <span class="ar">${item.name} x ${item.quantity}</span>
                        <span class="en">${item.nameEn} x ${item.quantity}</span>
                        <span>${item.price * item.quantity} AED</span>
                    </div>
                `;
            });
            
            orderElement.innerHTML = `
                <div class="order-header">
                    <span>#${document.querySelectorAll('.order-card').length + 1}</span>
                    <span>${orderTypeText}</span>
                    <span>${order.timestamp}</span>
                </div>
                <div class="order-details">
                    <div class="order-items">
                        ${itemsHtml}
                    </div>
                </div>
                <div class="order-status">
                    <span class="ar">المجموع: ${order.total} AED</span>
                    <span class="en">Total: ${order.total} AED</span>
                    <div>
                        <button class="status-btn status-pending ar">قيد الانتظار</button>
                        <button class="status-btn status-pending en">Pending</button>
                        <button class="status-btn status-completed ar">مكتمل</button>
                        <button class="status-btn status-completed en">Completed</button>
                    </div>
                </div>
            `;
            
            // إضافة في أعلى القائمة
            ordersList.insertBefore(orderElement, ordersList.firstChild);
            
            // إضافة مستمعي الأحداث لأزرار الحالة
            orderElement.querySelectorAll('.status-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const isCompleted = this.classList.contains('status-completed');
                    
                    // تغيير جميع أزرار الحالة لهذا الطلب
                    this.closest('.order-card').querySelectorAll('.status-btn').forEach(b => {
                        b.style.display = b.classList.contains('status-completed') === isCompleted ? 'none' : 'block';
                    });
                });
            });
            
            // تشغيل صوت الإشعار للمسؤول
            notificationSound.play();
        }
    </script>
</body>
</html>